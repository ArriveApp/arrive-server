<% active_page_is :user_management %>

<div class='text-center'>
  <%= form_for [@school, @user], html: {class: 'well'} do |f| %>
      <%= render partial: 'shared/errors', locals: {model: @user} %>

      <div class="controls controls-row">
        <%= f.label :firstname, 'First Name', class: "control-label" %>
        <%= f.text_field :firstname, :autofocus => true %>

        <%= f.label :lastname, 'Last Name', class: "control-label" %>
        <%= f.text_field :lastname %>
      </div>

      <div class="controls controls-row">
        <%= f.label :email, class: "control-label" %>
        <%= f.email_field :email %>

        <%= f.label :pin, class: "control-label" %>
        <%= f.text_field :password, maxlength: User::PIN_LENGTH %>

        <%= button_tag "Generate a random pin", id: 'generate-pin', type: 'button', class: 'btn', :'data-id' => params[:school_id]%>
      </div>

      <div class="controls-row">
        <%= f.label :is_teacher, 'Is this user a teacher?', class: 'control-label' %>
        <%= f.check_box :is_teacher %>
      </div>

      <%= f.submit "Add User", class: "btn btn-primary" %>
  <% end %>

  <%= form_tag bulk_add_school_users_path(@school), multipart: true, class: 'form-inline well' do %>
       <%= file_field_tag :file, title: "Choose a file to upload" %>

       <%= submit_tag "Add users", class: "btn btn-primary" %>
  <% end %>

  <table class="table table-striped">
    <thead>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Pin</th>
    </thead>
    <tbody>
    <% @users.each do |user| %>
        <tr>
          <td><%= user.full_name %></td>
          <td><%= user.email %></td>
          <td><%= user.role %></td>
          <td><%= user.pin %></td>
        </tr>
    <% end %>
    </tbody>
  </table>

</div>
